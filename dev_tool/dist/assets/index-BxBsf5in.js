import{h as z,r as d,U as F,o as _,k as V,m as k,Z as t,J as o,Y as M,I as x,X as u,P as D,p as h,V as $,W as J,ar as O}from"./index-C_ldcLaa.js";import{v as P}from"./loading-BZ-x_Wra.js";import{E as W}from"./dialog-DenxaH26.js";import{E as X,a as Y,b as Z,c as j,d as q,e as G}from"./table-column-DY5g9Mnp.js";import{f as H}from"./tag-Bw8r13h6.js";import{g as K,c as Q,d as R}from"./index-B-ZxWAqX.js";import{g as ee}from"./index-BaC-TcbR.js";import{E as n}from"./index-BXsJdXGe.js";import{E as te}from"./index-BB_zpUhy.js";import"./index-BrUEQemS.js";var p=(s=>(s.Taproot="taproot",s.Segwit="segwit",s))(p||{});function ae(s){return new Date(s).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}const oe={class:"address-container"},le={class:"header"},re={class:"dialog-footer"},ne=z({__name:"index",setup(s){const m=d(!1),v=d(!1),c=d(!1),w=d([]),b=d([]),r=d({chain_id:void 0,type:p.Taproot}),g=async()=>{m.value=!0;try{const l=await K({page:1,pageSize:10});w.value=l}catch(l){console.error("获取地址列表失败:",l),n.error("获取地址列表失败")}finally{m.value=!1}},L=async()=>{try{const l=await ee({});b.value=l}catch(l){console.error("获取链列表失败:",l),n.error("获取链列表失败")}},S=()=>{r.value={chain_id:void 0,type:p.Taproot},c.value=!0},T=async()=>{if(!r.value.chain_id){n.warning("请选择链");return}v.value=!0;try{await Q({chain_id:r.value.chain_id,type:r.value.type}),n.success("创建成功"),c.value=!1,g()}catch(l){console.error("创建地址失败:",l),n.error("创建地址失败")}finally{v.value=!1}},B=async l=>{try{await te.confirm("确定要删除该地址吗？","提示",{type:"warning"}),await R(l.ID),n.success("删除成功"),g()}catch(e){e!=="cancel"&&(console.error("删除地址失败:",e),n.error("删除地址失败"))}};return F(()=>{g(),L()}),(l,e)=>{const f=H,i=Y,I=X,y=Z,E=j,C=q,A=G,N=W,U=P;return _(),V("div",oe,[k("div",le,[t(f,{type:"primary",onClick:S},{default:o(()=>e[4]||(e[4]=[u("创建新地址")])),_:1})]),M((_(),x(I,{data:w.value,style:{width:"100%"}},{default:o(()=>[t(i,{prop:"chain.name",label:"链名称",width:"120"}),t(i,{prop:"address",label:"地址","min-width":"300"}),t(i,{prop:"private_key",label:"私钥","min-width":"300"}),t(i,{prop:"type",label:"类型",width:"100"},{default:o(({row:a})=>[u(D(a.type==="taproot"?"Taproot":"Segwit"),1)]),_:1}),t(i,{prop:"CreatedAt",label:"创建时间",width:"180"},{default:o(({row:a})=>[u(D(h(ae)(a.CreatedAt)),1)]),_:1}),t(i,{fixed:"right",label:"操作",width:"120"},{default:o(({row:a})=>[t(f,{link:"",type:"primary",size:"small",onClick:se=>B(a)},{default:o(()=>e[5]||(e[5]=[u("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[U,m.value]]),t(N,{modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=a=>c.value=a),title:"创建新地址",width:"500px"},{footer:o(()=>[k("span",re,[t(f,{onClick:e[2]||(e[2]=a=>c.value=!1)},{default:o(()=>e[6]||(e[6]=[u("取消")])),_:1}),t(f,{type:"primary",onClick:T,loading:v.value},{default:o(()=>e[7]||(e[7]=[u(" 创建 ")])),_:1},8,["loading"])])]),default:o(()=>[t(A,{model:r.value,"label-width":"100px"},{default:o(()=>[t(C,{label:"链"},{default:o(()=>[t(E,{modelValue:r.value.chain_id,"onUpdate:modelValue":e[0]||(e[0]=a=>r.value.chain_id=a),placeholder:"请选择链"},{default:o(()=>[(_(!0),V($,null,J(b.value,a=>(_(),x(y,{key:a.ID,label:a.name,value:a.ID},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(C,{label:"地址类型"},{default:o(()=>[t(E,{modelValue:r.value.type,"onUpdate:modelValue":e[1]||(e[1]=a=>r.value.type=a),placeholder:"请选择地址类型"},{default:o(()=>[t(y,{label:"Taproot",value:h(p).Taproot},null,8,["value"]),t(y,{label:"Segwit",value:h(p).Segwit},null,8,["value"])]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),ye=O(ne,[["__scopeId","data-v-2898bd34"]]);export{ye as default};
