import{c as K,ak as ee,h as U,v as O,z as N,o as p,k,P as I,I as L,J as m,M as oe,p as n,L as ne,_ as H,w as Pe,d as se,at as ue,au as ce,j as X,r as C,A as ae,a as ze,Z as u,V as de,W as pe,q as M,m as Y,av as Se,N as Q,ac as ke,aw as re,af as xe,a5 as Ne,ah as Te,ax as Ue,H as Ee,y as we,ay as D,a1 as q,ad as Me,ae as Be,u as $e,aj as Le,U as Ie,Y as Ve,az as qe,X as R,ar as Ae}from"./index-C_ldcLaa.js";import{v as De}from"./loading-BZ-x_Wra.js";import{E as Re}from"./dialog-DenxaH26.js";import{b as ge,c as fe,E as Fe,a as je,d as Ke,e as Oe}from"./table-column-DY5g9Mnp.js";import{i as We,E as ve,k as Je,f as Xe,l as He}from"./tag-Bw8r13h6.js";/* empty css              */import{g as Ge,d as Ye,c as Ze,u as Qe}from"./index-BaC-TcbR.js";import{E as J}from"./index-BXsJdXGe.js";import{E as ea}from"./index-BB_zpUhy.js";import"./index-BrUEQemS.js";const me=Symbol("elPaginationKey"),aa=K({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:ee}}),ta={click:e=>e instanceof MouseEvent},na=U({name:"ElPaginationPrev"}),la=U({...na,props:aa,emits:ta,setup(e){const s=e,{t:l}=O(),c=N(()=>s.disabled||s.currentPage<=1);return(o,g)=>(p(),k("button",{type:"button",class:"btn-prev",disabled:n(c),"aria-label":o.prevText||n(l)("el.pagination.prev"),"aria-disabled":n(c),onClick:f=>o.$emit("click",f)},[o.prevText?(p(),k("span",{key:0},I(o.prevText),1)):(p(),L(n(ne),{key:1},{default:m(()=>[(p(),L(oe(o.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var ra=H(la,[["__file","prev.vue"]]);const ia=K({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:ee}}),oa=U({name:"ElPaginationNext"}),sa=U({...oa,props:ia,emits:["click"],setup(e){const s=e,{t:l}=O(),c=N(()=>s.disabled||s.currentPage===s.pageCount||s.pageCount===0);return(o,g)=>(p(),k("button",{type:"button",class:"btn-next",disabled:n(c),"aria-label":o.nextText||n(l)("el.pagination.next"),"aria-disabled":n(c),onClick:f=>o.$emit("click",f)},[o.nextText?(p(),k("span",{key:0},I(o.nextText),1)):(p(),L(n(ne),{key:1},{default:m(()=>[(p(),L(oe(o.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var ua=H(sa,[["__file","next.vue"]]);const le=()=>Pe(me,{}),ca=K({pageSize:{type:Number,required:!0},pageSizes:{type:se(Array),default:()=>ue([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:ce},appendSizeTo:String}),da=U({name:"ElPaginationSizes"}),pa=U({...da,props:ca,emits:["page-size-change"],setup(e,{emit:s}){const l=e,{t:c}=O(),o=X("pagination"),g=le(),f=C(l.pageSize);ae(()=>l.pageSizes,(i,z)=>{if(!We(i,z)&&ze(i)){const d=i.includes(l.pageSize)?l.pageSize:l.pageSizes[0];s("page-size-change",d)}}),ae(()=>l.pageSize,i=>{f.value=i});const _=N(()=>l.pageSizes);function T(i){var z;i!==f.value&&(f.value=i,(z=g.handleSizeChange)==null||z.call(g,Number(i)))}return(i,z)=>(p(),k("span",{class:M(n(o).e("sizes"))},[u(n(fe),{"model-value":f.value,disabled:i.disabled,"popper-class":i.popperClass,size:i.size,teleported:i.teleported,"validate-event":!1,"append-to":i.appendSizeTo,onChange:T},{default:m(()=>[(p(!0),k(de,null,pe(n(_),d=>(p(),L(n(ge),{key:d,value:d,label:d+n(c)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported","append-to"])],2))}});var ga=H(pa,[["__file","sizes.vue"]]);const fa=K({size:{type:String,values:ce}}),va=U({name:"ElPaginationJumper"}),ma=U({...va,props:fa,setup(e){const{t:s}=O(),l=X("pagination"),{pageCount:c,disabled:o,currentPage:g,changeEvent:f}=le(),_=C(),T=N(()=>{var d;return(d=_.value)!=null?d:g==null?void 0:g.value});function i(d){_.value=d?+d:""}function z(d){d=Math.trunc(+d),f==null||f(d),_.value=void 0}return(d,B)=>(p(),k("span",{class:M(n(l).e("jump")),disabled:n(o)},[Y("span",{class:M([n(l).e("goto")])},I(n(s)("el.pagination.goto")),3),u(n(ve),{size:d.size,class:M([n(l).e("editor"),n(l).is("in-pagination")]),min:1,max:n(c),disabled:n(o),"model-value":n(T),"validate-event":!1,"aria-label":n(s)("el.pagination.page"),type:"number","onUpdate:modelValue":i,onChange:z},null,8,["size","class","max","disabled","model-value","aria-label"]),Y("span",{class:M([n(l).e("classifier")])},I(n(s)("el.pagination.pageClassifier")),3)],10,["disabled"]))}});var ba=H(ma,[["__file","jumper.vue"]]);const ha=K({total:{type:Number,default:1e3}}),Ca=U({name:"ElPaginationTotal"}),_a=U({...Ca,props:ha,setup(e){const{t:s}=O(),l=X("pagination"),{disabled:c}=le();return(o,g)=>(p(),k("span",{class:M(n(l).e("total")),disabled:n(c)},I(n(s)("el.pagination.total",{total:o.total})),11,["disabled"]))}});var ya=H(_a,[["__file","total.vue"]]);const Pa=K({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),za=U({name:"ElPaginationPager"}),Sa=U({...za,props:Pa,emits:["change"],setup(e,{emit:s}){const l=e,c=X("pager"),o=X("icon"),{t:g}=O(),f=C(!1),_=C(!1),T=C(!1),i=C(!1),z=C(!1),d=C(!1),B=N(()=>{const r=l.pagerCount,t=(r-1)/2,a=Number(l.currentPage),y=Number(l.pageCount);let h=!1,P=!1;y>r&&(a>r-t&&(h=!0),a<y-t&&(P=!0));const $=[];if(h&&!P){const S=y-(r-2);for(let E=S;E<y;E++)$.push(E)}else if(!h&&P)for(let S=2;S<r;S++)$.push(S);else if(h&&P){const S=Math.floor(r/2)-1;for(let E=a-S;E<=a+S;E++)$.push(E)}else for(let S=2;S<y;S++)$.push(S);return $}),A=N(()=>["more","btn-quickprev",o.b(),c.is("disabled",l.disabled)]),w=N(()=>["more","btn-quicknext",o.b(),c.is("disabled",l.disabled)]),b=N(()=>l.disabled?-1:0);Se(()=>{const r=(l.pagerCount-1)/2;f.value=!1,_.value=!1,l.pageCount>l.pagerCount&&(l.currentPage>l.pagerCount-r&&(f.value=!0),l.currentPage<l.pageCount-r&&(_.value=!0))});function F(r=!1){l.disabled||(r?T.value=!0:i.value=!0)}function W(r=!1){r?z.value=!0:d.value=!0}function G(r){const t=r.target;if(t.tagName.toLowerCase()==="li"&&Array.from(t.classList).includes("number")){const a=Number(t.textContent);a!==l.currentPage&&s("change",a)}else t.tagName.toLowerCase()==="li"&&Array.from(t.classList).includes("more")&&j(r)}function j(r){const t=r.target;if(t.tagName.toLowerCase()==="ul"||l.disabled)return;let a=Number(t.textContent);const y=l.pageCount,h=l.currentPage,P=l.pagerCount-2;t.className.includes("more")&&(t.className.includes("quickprev")?a=h-P:t.className.includes("quicknext")&&(a=h+P)),Number.isNaN(+a)||(a<1&&(a=1),a>y&&(a=y)),a!==h&&s("change",a)}return(r,t)=>(p(),k("ul",{class:M(n(c).b()),onClick:j,onKeyup:Ne(G,["enter"])},[r.pageCount>0?(p(),k("li",{key:0,class:M([[n(c).is("active",r.currentPage===1),n(c).is("disabled",r.disabled)],"number"]),"aria-current":r.currentPage===1,"aria-label":n(g)("el.pagination.currentPage",{pager:1}),tabindex:n(b)}," 1 ",10,["aria-current","aria-label","tabindex"])):Q("v-if",!0),f.value?(p(),k("li",{key:1,class:M(n(A)),tabindex:n(b),"aria-label":n(g)("el.pagination.prevPages",{pager:r.pagerCount-2}),onMouseenter:a=>F(!0),onMouseleave:a=>T.value=!1,onFocus:a=>W(!0),onBlur:a=>z.value=!1},[(T.value||z.value)&&!r.disabled?(p(),L(n(ke),{key:0})):(p(),L(n(re),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):Q("v-if",!0),(p(!0),k(de,null,pe(n(B),a=>(p(),k("li",{key:a,class:M([[n(c).is("active",r.currentPage===a),n(c).is("disabled",r.disabled)],"number"]),"aria-current":r.currentPage===a,"aria-label":n(g)("el.pagination.currentPage",{pager:a}),tabindex:n(b)},I(a),11,["aria-current","aria-label","tabindex"]))),128)),_.value?(p(),k("li",{key:2,class:M(n(w)),tabindex:n(b),"aria-label":n(g)("el.pagination.nextPages",{pager:r.pagerCount-2}),onMouseenter:a=>F(),onMouseleave:a=>i.value=!1,onFocus:a=>W(),onBlur:a=>d.value=!1},[(i.value||d.value)&&!r.disabled?(p(),L(n(xe),{key:0})):(p(),L(n(re),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):Q("v-if",!0),r.pageCount>1?(p(),k("li",{key:3,class:M([[n(c).is("active",r.currentPage===r.pageCount),n(c).is("disabled",r.disabled)],"number"]),"aria-current":r.currentPage===r.pageCount,"aria-label":n(g)("el.pagination.currentPage",{pager:r.pageCount}),tabindex:n(b)},I(r.pageCount),11,["aria-current","aria-label","tabindex"])):Q("v-if",!0)],42,["onKeyup"]))}});var ka=H(Sa,[["__file","pager.vue"]]);const x=e=>typeof e!="number",xa=K({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>q(e)&&Math.trunc(e)===e&&e>4&&e<22&&e%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:se(Array),default:()=>ue([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:ee,default:()=>Me},nextText:{type:String,default:""},nextIcon:{type:ee,default:()=>Be},teleported:{type:Boolean,default:!0},small:Boolean,size:$e,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),Na={"update:current-page":e=>q(e),"update:page-size":e=>q(e),"size-change":e=>q(e),change:(e,s)=>q(e)&&q(s),"current-change":e=>q(e),"prev-click":e=>q(e),"next-click":e=>q(e)},ie="ElPagination";var Ta=U({name:ie,props:xa,emits:Na,setup(e,{emit:s,slots:l}){const{t:c}=O(),o=X("pagination"),g=Te().vnode.props||{},f=Ue(),_=N(()=>{var t;return e.small?"small":(t=e.size)!=null?t:f.value});Je({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},N(()=>!!e.small));const T="onUpdate:currentPage"in g||"onUpdate:current-page"in g||"onCurrentChange"in g,i="onUpdate:pageSize"in g||"onUpdate:page-size"in g||"onSizeChange"in g,z=N(()=>{if(x(e.total)&&x(e.pageCount)||!x(e.currentPage)&&!T)return!1;if(e.layout.includes("sizes")){if(x(e.pageCount)){if(!x(e.total)&&!x(e.pageSize)&&!i)return!1}else if(!i)return!1}return!0}),d=C(x(e.defaultPageSize)?10:e.defaultPageSize),B=C(x(e.defaultCurrentPage)?1:e.defaultCurrentPage),A=N({get(){return x(e.pageSize)?d.value:e.pageSize},set(t){x(e.pageSize)&&(d.value=t),i&&(s("update:page-size",t),s("size-change",t))}}),w=N(()=>{let t=0;return x(e.pageCount)?x(e.total)||(t=Math.max(1,Math.ceil(e.total/A.value))):t=e.pageCount,t}),b=N({get(){return x(e.currentPage)?B.value:e.currentPage},set(t){let a=t;t<1?a=1:t>w.value&&(a=w.value),x(e.currentPage)&&(B.value=a),T&&(s("update:current-page",a),s("current-change",a))}});ae(w,t=>{b.value>t&&(b.value=t)}),ae([b,A],t=>{s("change",...t)},{flush:"post"});function F(t){b.value=t}function W(t){A.value=t;const a=w.value;b.value>a&&(b.value=a)}function G(){e.disabled||(b.value-=1,s("prev-click",b.value))}function j(){e.disabled||(b.value+=1,s("next-click",b.value))}function r(t,a){t&&(t.props||(t.props={}),t.props.class=[t.props.class,a].join(" "))}return Ee(me,{pageCount:w,disabled:N(()=>e.disabled),currentPage:b,changeEvent:F,handleSizeChange:W}),()=>{var t,a;if(!z.value)return we(ie,c("el.pagination.deprecationWarning")),null;if(!e.layout||e.hideOnSinglePage&&w.value<=1)return null;const y=[],h=[],P=D("div",{class:o.e("rightwrapper")},h),$={prev:D(ra,{disabled:e.disabled,currentPage:b.value,prevText:e.prevText,prevIcon:e.prevIcon,onClick:G}),jumper:D(ba,{size:_.value}),pager:D(ka,{currentPage:b.value,pageCount:w.value,pagerCount:e.pagerCount,onChange:F,disabled:e.disabled}),next:D(ua,{disabled:e.disabled,currentPage:b.value,pageCount:w.value,nextText:e.nextText,nextIcon:e.nextIcon,onClick:j}),sizes:D(ga,{pageSize:A.value,pageSizes:e.pageSizes,popperClass:e.popperClass,disabled:e.disabled,teleported:e.teleported,size:_.value,appendSizeTo:e.appendSizeTo}),slot:(a=(t=l==null?void 0:l.default)==null?void 0:t.call(l))!=null?a:null,total:D(ya,{total:x(e.total)?0:e.total})},S=e.layout.split(",").map(V=>V.trim());let E=!1;return S.forEach(V=>{if(V==="->"){E=!0;return}E?h.push($[V]):y.push($[V])}),r(y[0],o.is("first")),r(y[y.length-1],o.is("last")),E&&h.length>0&&(r(h[0],o.is("first")),r(h[h.length-1],o.is("last")),y.push(P)),D("div",{class:[o.b(),o.is("background",e.background),o.m(_.value)]},y)}}});const Ua=Le(Ta),Ea={class:"chain-container"},wa={class:"chain-header"},Ma={class:"dialog-footer"},Ba=U({__name:"chain",setup(e){const s=C(!1),l=C([]),c=C(1),o=C(10),g=C(0),f=C(!1),_=C("create"),T=C(),i=C({name:"",chainType:"mainNet",broadcastUrl:"",utxoUrl:""}),z=C(""),d={name:[{required:!0,message:"请输入链名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],chainType:[{required:!0,message:"请选择链类型",trigger:"change"}],broadcastUrl:[{required:!0,message:"请输入广播URL",trigger:"blur"},{type:"url",message:"请输入有效的URL地址",trigger:"blur"}],utxoUrl:[{type:"url",message:"请输入有效的URL地址",trigger:"blur"}]},B=async()=>{s.value=!0;try{const t=await Ge({});l.value=t,g.value=t.length}catch{J.error("获取链列表失败")}finally{s.value=!1}},A=t=>{o.value!==t&&(o.value=t,B())},w=t=>{c.value!==t&&(c.value=t,B())},b=()=>{_.value="create",i.value={name:"",chainType:"mainNet",broadcastUrl:"",utxoUrl:""},f.value=!0},F=t=>{_.value="edit",z.value=t.ID.toString(),i.value={name:t.name,chainType:t.chain_type,broadcastUrl:t.broadcast_url,utxoUrl:t.utxo_url},f.value=!0},W=async t=>{try{await ea.confirm(`确定要删除链 "${t.name}" 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await Ye(t.ID.toString()),J.success("删除成功"),B()}catch(a){a!=="cancel"&&J.error("删除失败")}},G=async()=>{T.value&&await T.value.validate(async t=>{if(t)try{_.value==="create"?(await Ze(i.value),J.success("创建成功")):(await Qe(z.value,i.value),J.success("更新成功")),f.value=!1,B()}catch{J.error(_.value==="create"?"创建失败":"更新失败")}})},j=t=>{if(!t)return"-";try{const a=new Date(t);return isNaN(a.getTime())?"-":a.toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}catch{return"-"}},r=t=>({mainNet:"主网",testNet:"测试网",regTest:"回归测试网"})[t]||t;return Ie(()=>{B()}),(t,a)=>{const y=ne,h=Xe,P=je,$=He,S=Fe,E=Ua,V=ve,Z=Ke,te=ge,be=fe,he=Oe,Ce=Re,_e=De;return p(),k("div",Ea,[Y("div",wa,[a[9]||(a[9]=Y("h2",null,"链配置管理",-1)),u(h,{type:"primary",onClick:b},{default:m(()=>[u(y,null,{default:m(()=>[u(n(qe))]),_:1}),a[8]||(a[8]=R("新建链 "))]),_:1})]),Ve((p(),L(S,{data:l.value,style:{width:"100%"},border:""},{default:m(()=>[u(P,{prop:"name",label:"名称","min-width":"120"}),u(P,{prop:"chain_type",label:"类型","min-width":"100"},{default:m(({row:v})=>[R(I(r(v.chain_type)),1)]),_:1}),u(P,{prop:"broadcast_url",label:"广播URL","min-width":"200"}),u(P,{prop:"utxo_url",label:"UTXO URL","min-width":"200"}),u(P,{prop:"CreatedAt",label:"创建时间","min-width":"180"},{default:m(({row:v})=>[R(I(j(v.CreatedAt)),1)]),_:1}),u(P,{prop:"UpdatedAt",label:"更新时间","min-width":"180"},{default:m(({row:v})=>[R(I(j(v.UpdatedAt)),1)]),_:1}),u(P,{label:"操作",width:"200",fixed:"right"},{default:m(({row:v})=>[u($,null,{default:m(()=>[u(h,{type:"primary",link:"",onClick:ye=>F(v)},{default:m(()=>a[10]||(a[10]=[R(" 编辑 ")])),_:2},1032,["onClick"]),u(h,{type:"danger",link:"",onClick:ye=>W(v)},{default:m(()=>a[11]||(a[11]=[R(" 删除 ")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"])),[[_e,s.value]]),u(E,{"current-page":c.value,"onUpdate:currentPage":a[0]||(a[0]=v=>c.value=v),"page-size":o.value,"onUpdate:pageSize":a[1]||(a[1]=v=>o.value=v),total:g.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",class:"pagination",onSizeChange:A,onCurrentChange:w},null,8,["current-page","page-size","total"]),u(Ce,{modelValue:f.value,"onUpdate:modelValue":a[7]||(a[7]=v=>f.value=v),title:_.value==="create"?"新建链":"编辑链",width:"600px"},{footer:m(()=>[Y("span",Ma,[u(h,{onClick:a[6]||(a[6]=v=>f.value=!1)},{default:m(()=>a[12]||(a[12]=[R("取消")])),_:1}),u(h,{type:"primary",onClick:G},{default:m(()=>a[13]||(a[13]=[R(" 确定 ")])),_:1})])]),default:m(()=>[u(he,{ref_key:"formRef",ref:T,model:i.value,rules:d,"label-width":"100px"},{default:m(()=>[u(Z,{label:"名称",prop:"name"},{default:m(()=>[u(V,{modelValue:i.value.name,"onUpdate:modelValue":a[2]||(a[2]=v=>i.value.name=v),placeholder:"请输入链名称"},null,8,["modelValue"])]),_:1}),u(Z,{label:"类型",prop:"chainType"},{default:m(()=>[u(be,{modelValue:i.value.chainType,"onUpdate:modelValue":a[3]||(a[3]=v=>i.value.chainType=v),placeholder:"请选择链类型"},{default:m(()=>[u(te,{label:"主网",value:"mainNet"}),u(te,{label:"测试网",value:"testNet"}),u(te,{label:"回归测试网",value:"regTest"})]),_:1},8,["modelValue"])]),_:1}),u(Z,{label:"广播URL",prop:"broadcastUrl"},{default:m(()=>[u(V,{modelValue:i.value.broadcastUrl,"onUpdate:modelValue":a[4]||(a[4]=v=>i.value.broadcastUrl=v),placeholder:"请输入广播URL"},null,8,["modelValue"])]),_:1}),u(Z,{label:"UTXO URL",prop:"utxoUrl"},{default:m(()=>[u(V,{modelValue:i.value.utxoUrl,"onUpdate:modelValue":a[5]||(a[5]=v=>i.value.utxoUrl=v),placeholder:"请输入UTXO URL（可选）"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),Ka=Ae(Ba,[["__scopeId","data-v-c6c8e5ee"]]);export{Ka as default};
